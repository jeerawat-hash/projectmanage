
    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-12">


 

            <div class="card card-success">
              <div class="card-header">
                <h3 class="card-title">ภาพรวมความคืบหน้าโครงการ</h3>
              </div>
              
              <!-- /.card-header -->
              <div class="card-body">
                
                <div class="row" id="ProgressProject">




 



<!--
                  <div class="col-sm-4 mt-4">
                    <div class="position-relative p-3 bg-gray" style="height: 220px">
                      <div class="ribbon-wrapper ribbon-lg">
                        <div class="ribbon bg-success text-lg">
                          ปกติ
                        </div>
                      </div>

                      <div class="row">

                        <div class="col-12"> 
                                 [ชื่อโครงการ]
                        </div> 
                        <div class="col-12"> 
                                 [รายละเอียดย่อ]
                        </div> 

                      </div>
                      <hr>
                      <div class="row">
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar2.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar3.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar4.png"> 
                        </div>
                      </div>

                      <br>

                      <div class="row">
                        <div class="col-12">
                          

                          <small> ดำเนินการแล้วเสร็จ </small>
                          <div class="progress">
                            <div class="progress-bar bg-success progress-bar-striped" role="progressbar"
                                 aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                              <span class="sr-only">40% Complete </span>
                            </div>
                          </div>
                          
  
                        </div>
                      </div>
 
                    </div>
                  </div>



                  <div class="col-sm-4 mt-4">
                    <div class="position-relative p-3 bg-gray" style="height: 220px">
                      <div class="ribbon-wrapper ribbon-xl">
                        <div class="ribbon bg-warning text-lg">
                          ใกล้ครบกำหนด
                        </div>
                      </div>
                      <div class="row">

                        <div class="col-12"> 
                                 [ชื่อโครงการ]
                        </div> 
                        <div class="col-12"> 
                                 [รายละเอียดย่อ]
                        </div> 

                      </div>
                      <hr>
                      <div class="row">
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar2.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar3.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar4.png"> 
                        </div>
                      </div>

                      <br>

                      <div class="row">
                        <div class="col-12">
                          

                          <small> ดำเนินการแล้วเสร็จ </small>
                          <div class="progress">
                            <div class="progress-bar bg-warning progress-bar-striped" role="progressbar"
                                 aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                              <span class="sr-only">40% Complete </span>
                            </div>
                          </div>
                          
  
                        </div>
                      </div>

                    </div>
                  </div>






                  <div class="col-sm-4 mt-4">
                    <div class="position-relative p-3 bg-gray" style="height: 220px">
                      <div class="ribbon-wrapper ribbon-xl">
                        <div class="ribbon bg-danger text-lg">
                          เกินกำหนด
                        </div>
                      </div>
                      <div class="row">

                        <div class="col-12"> 
                                 [ชื่อโครงการ]
                        </div> 
                        <div class="col-12"> 
                                 [รายละเอียดย่อ]
                        </div> 

                      </div>
                      <hr>
                      <div class="row">
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar2.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar3.png"> 
                        </div>
                        <div class="col-3 text-center"> 
                                  <img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar4.png"> 
                        </div>
                      </div>

                      <br>

                      <div class="row">
                        <div class="col-12">
                          

                          <small> ดำเนินการแล้วเสร็จ </small>
                          <div class="progress">
                            <div class="progress-bar bg-danger progress-bar-striped" role="progressbar"
                                 aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                              <span class="sr-only">40% Complete </span>
                            </div>
                          </div>
                          
  
                        </div>
                      </div>

                    </div>
                  </div>
-->

                   
                  



                </div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->











            <div class="card card-warning">
              <div class="card-header">
                <h3 class="card-title">โครงการอยู่ระหว่างส่งมอบ</h3>
              </div>
              
              <!-- /.card-header -->
              <div class="card-body">
                
                <div class="row" id="NonProgressProject">
 
                   

 

                </div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
 


          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container-fluid -->
    </section>
    <!-- /.content -->






<script type="text/javascript">
  
  $(function(){





    setInterval(function(){ 

    $.post("https://projectmanage.webclient.me/index.php/ProjectData/GetDataProgress",function(data){

      var obj = JSON.parse(data);
      console.log(obj);


        var html = "";

        for (var i = 0; i < obj.length; i++) {
          
          //obj[i].Name
          //obj[i].Detail
          //obj[i].percent
          //obj[i].Progress
          //obj[i].StatusProject //0 = ปกติ 1 = ใกล้ครบกำหนด
          //obj[i].IsOverDue      // 0 = ปกติ 1 = เกินกำหนด
 

             
            if (obj[i].Name.length > 40) {

              obj[i].Name = obj[i].Name.substring(0, 40)+"...";

            }else{

              obj[i].Name = obj[i].Name;

            }
            if (obj[i].Detail.length > 30) {

              obj[i].Detail = obj[i].Detail.substring(0, 30)+"...";

            }else{

              obj[i].Detail = obj[i].Detail;

            }



 
            var TXTstatus = "";
            var BarStatus = "";
            if (obj[i].IsOverDue == 1) {

              TXTstatus = '<div class="ribbon bg-danger text-lg">เกินกำหนด</div>';

              BarStatus = '<div class="progress-bar bg-danger progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';



            }else{


              if (obj[i].StatusProject == 0) {

                TXTstatus = '<div class="ribbon bg-success text-lg">ปกติ</div>';
                BarStatus = '<div class="progress-bar bg-success progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';


              }else{

                TXTstatus = '<div class="ribbon bg-warning text-lg">ใกล้ครบกำหนด</div>';
                BarStatus = '<div class="progress-bar bg-warning progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';

              }



            }



            html += '<div class="col-sm-4 mt-4">';
            html += '<div class="position-relative p-3 bg-gray" style="height: 220px">';
            html += '<div class="ribbon-wrapper ribbon-lg">';



            //html += '<div class="ribbon bg-success text-lg">ปกติ</div>';
            html += TXTstatus;


            html += '</div>';
            html += '<div class="row">';
            html += '<div class="col-12">';
            html += obj[i].Name;
            html += '</div> ';
            html += '<div class="col-12"> ';
            html += obj[i].Detail;
            html += '</div> ';
            html += '</div>';
            html += '<hr>';
            html += '<div class="row">';

            var Content = "";

            for (var j = 0; j < obj[i].Group.length; j++) {

                Content += '<div class="col-3 text-center"> ';
                Content += '<img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar.png"> ';
                Content += '</div>';

            }
             
            html += Content;

            html += '</div>'; 
            html += '<br>';
            html += '<div class="row">';
            html += '<div class="col-12">';
            html += '<small> ดำเนินการแล้วเสร็จ </small>';
            html += '<div class="progress">';



            html += BarStatus;
            //html += '<div class="progress-bar bg-success progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';
            



            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
 

        } 

        $("#ProgressProject").html(html);
 
      });
    
    }, 500);


/////////////////////////////////////////////////////////////////////////


  setInterval(function(){ 

    $.post("https://projectmanage.webclient.me/index.php/ProjectData/GetDataNonProgress",function(data){

      var obj = JSON.parse(data);
      console.log(obj);


        var html = "";

        for (var i = 0; i < obj.length; i++) {
          
          //obj[i].Name
          //obj[i].Detail
          //obj[i].percent
          //obj[i].Progress
          //obj[i].StatusProject //0 = ปกติ 1 = ใกล้ครบกำหนด
          //obj[i].IsOverDue      // 0 = ปกติ 1 = เกินกำหนด
 
            obj[i].Name = obj[i].Name.substring(0, 40);
            obj[i].Detail = obj[i].Detail.substring(0, 30);


            var TXTstatus = "";
            var BarStatus = "";
            if (obj[i].IsOverDue == 1) {

              TXTstatus = '<div class="ribbon bg-danger text-lg">เกินกำหนด</div>';

              BarStatus = '<div class="progress-bar bg-danger progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';



            }else{


              if (obj[i].StatusProject == 0) {

                TXTstatus = '<div class="ribbon bg-success text-lg">ปกติ</div>';
                BarStatus = '<div class="progress-bar bg-success progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';


              }else{

                TXTstatus = '<div class="ribbon bg-warning text-lg">ใกล้ครบกำหนด</div>';
                BarStatus = '<div class="progress-bar bg-warning progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';

              }



            }



            html += '<div class="col-sm-4 mt-4">';
            html += '<div class="position-relative p-3 bg-gray" style="height: 220px">';
            html += '<div class="ribbon-wrapper ribbon-lg">';



            //html += '<div class="ribbon bg-success text-lg">ปกติ</div>';
            html += TXTstatus;


            html += '</div>';
            html += '<div class="row">';
            html += '<div class="col-12">';
            html += obj[i].Name;
            html += '</div> ';
            html += '<div class="col-12"> ';
            html += obj[i].Detail;
            html += '</div> ';
            html += '</div>';
            html += '<hr>';
            html += '<div class="row">';

            var Content = "";

            for (var j = 0; j < obj[i].Group.length; j++) {

                Content += '<div class="col-3 text-center"> ';
                Content += '<img alt="Avatar" class="table-avatar" style="width: 50%" src="https://projectmanage.webclient.me/assets/dist/img/avatar.png"> ';
                Content += '</div>';

            }
             
            html += Content;

            html += '</div>'; 
            html += '<br>';
            html += '<div class="row">';
            html += '<div class="col-12">';
            html += '<small> ดำเนินการแล้วเสร็จ </small>';
            html += '<div class="progress">';



            html += BarStatus;
            //html += '<div class="progress-bar bg-success progress-bar-striped" role="progressbar"aria-valuenow="'+obj[i].percent+'" aria-valuemin="0" aria-valuemax="100" style="width: '+obj[i].percent+'%"><span class="sr-only">'+obj[i].percent+'% Complete </span>';
            



            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
 

        } 

        $("#NonProgressProject").html(html);




      });

    }, 500);









































  });

</script>






